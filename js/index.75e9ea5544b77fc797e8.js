(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"3Ovx":function(e,t,s){},"8DxK":function(e,t,s){"use strict";var a=s("wuEK"),o=s("zpy1");const i=s("Qyje");t.a={get:(e,t)=>n(e,"get",t),jsonPost:(e,t)=>n(e,"json_post",t),post:(e,t)=>n(e,"post",t),axiosUpload:(e,t,s)=>n(e,"file",t,s),download:e=>n(e,"download"),put:(e,t)=>n(e,"put",t),delete:e=>n(e,"delete"),getToken:()=>r()};const r=function(){let e=localStorage.getItem("ssm_token");return e||(e=o.a.vueG.$cookie.get("ssm_token")),e||(e=""),e},n=function(e,t,s,n){let l;const c=a.a.baseURL+e;let m=r();return l="download"===t?o.a.vueG.axios.get(e,{headers:{Authorization:m},responseType:"blob"}):"file"===t?o.a.vueG.axios.create({baseURL:a.a.baseURL,headers:{"Content-Type":"multipart/form-data",Authorization:m},onUploadProgress:n}).post(c,s,{cancelToken:s.get("formFile").source.token}):"get"===t?o.a.vueG.axios.get(c,{headers:{Authorization:m},params:s}):"put"===t?o.a.vueG.axios.put(c,s,{headers:{"Content-Type":"application/json",Authorization:m}}):"delete"===t?o.a.vueG.axios.delete(c,{headers:{"Content-Type":"application/json",Authorization:m}}):"json_post"===t?o.a.vueG.axios.post(c,s,{headers:{"Content-Type":"application/json",Authorization:m}}):o.a.vueG.axios.post(c,null,{headers:{Authorization:m},params:s,paramsSerializer:e=>i.stringify(e,{arrayFormat:"repeat"})}),l.then(e=>e.data).catch(e=>(e.message&&"cancel-upload"===e.message||(-1!==o.a.vueG.$route.path.indexOf("/wx/")?o.a.vueG.$message({showClose:!0,message:e.response.data.error_msg?e.response.data.error_msg:"服务异常",type:"error",duration:5e3}):o.a.vueG.$notify.error({title:"错误",message:e.response.data.error_msg?e.response.data.error_msg:"服务异常"}),1001===e.response.data.error_code&&(-1!==o.a.vueG.$route.path.indexOf("/wx/")?(localStorage.setItem("currentPath",o.a.vueG.$route.fullPath),o.a.vueG.$router.push("/wx/loginM").catch(e=>e)):o.a.vueG.$router.push("/sign").catch(e=>e))),new Promise((t,s)=>{s(e)})))}},A3XI:function(e,t,s){"use strict";var a=s("8DxK");t.a={saveQB:e=>e.id?a.a.put("/question/bank/"+e.id+"/",e):a.a.jsonPost("/question/bank/",e),getQB:e=>a.a.get("/question/bank/"+e.id+"/"),deleteQB:e=>a.a.delete("/question/bank/"+e.id+"/"),getQBs:e=>a.a.get("/question/bank/list/",e),saveQuestion:e=>e.id?a.a.put("/question/"+e.id+"/",e):a.a.jsonPost("/question/",e),getQuestion:e=>a.a.get("/question/"+e.id+"/"),deleteQuestion:e=>a.a.delete("/question/"+e.id+"/"),getQuestions:e=>a.a.get("/question/list/",e),checkExam:()=>a.a.get("/exam/in/"),startExam:e=>a.a.get("/exam/start/",e),commitAnswer:e=>a.a.jsonPost("/exam/answer/",e),commitPaper:e=>a.a.jsonPost("/exam/submit/",e),scores:e=>a.a.get("/exam/paper/list/",e)}},BhED:function(e,t,s){},Cf22:function(e,t,s){},ExdL:function(e,t,s){"use strict";var a=s("U1Tk");s.n(a).a},Ft5P:function(e,t,s){"use strict";var a=s("GZ2+");s.n(a).a},"GZ2+":function(e,t,s){},IbZz:function(e,t,s){"use strict";var a=s("fW3T");s.n(a).a},IoKK:function(e,t,s){},KuyF:function(e,t,s){},"LG+U":function(e,t,s){"use strict";var a=s("Cf22");s.n(a).a},LLn7:function(e,t,s){},PLEf:function(e,t,s){},Stt8:function(e,t,s){"use strict";var a=s("gzyx");s.n(a).a},TD3R:function(e,t,s){"use strict";var a=s("LLn7");s.n(a).a},TNfx:function(e,t,s){"use strict";t.a={toError(e){"/wx/loginM"!==e.$route.path&&e.$router.push({path:"/wx/error"}).catch(e=>e)}}},Tyvh:function(e,t,s){"use strict";(function(e){var a=s("zpy1"),o=s("A3XI"),i=s("i3ZA"),r=s("TNfx");s("BjkG"),t.a={name:"Paper",data:function(){return{status:"no-status",examId:"",paperId:"",questions:[]}},mounted:function(){o.a.checkExam().then(e=>{e.paper?this.exam(e):(this.status="not-started",this.examId=e.exam.id)}).catch(e=>{r.a.toError(this)}),document.title="考试"},methods:{start(){o.a.startExam({examId:this.examId}).then(e=>{this.exam(e)})},exam(t){this.status="started",this.paperId=t.paper.id,this.questions=t.paper.questions,this.$nextTick(()=>{e(".timer").countdown(1e3*t.exam.duration+new Date(t.paper.startTime).valueOf(),t=>{let s=e(this.$el);switch(t.type){case"seconds":case"minutes":case"hours":case"days":case"weeks":case"daysLeft":s.find("span."+t.type).html(t.value);break;case"finished":this.submit(!0)}})})},submit(e){o.a.commitPaper({id:this.paperId}).then(t=>{e?this.$message({showClose:!0,message:"考试时间到,系统已为您自动提交考卷!",type:"warning",duration:5e3}):this.$message({showClose:!0,message:"考卷已提交,考试结束!",type:"success",duration:3e3}),a.a.vueG.$router.push("/wx/score").catch(e=>e)})}},components:{Question:i.a}}}).call(this,s("xexB"))},U1Tk:function(e,t,s){},WcfB:function(e,t,s){"use strict";var a=s("IoKK");s.n(a).a},Wokm:function(e,t,s){},ZnVh:function(e,t,s){"use strict";var a=s("BhED");s.n(a).a},fW3T:function(e,t,s){},gNzl:function(e,t,s){"use strict";var a=s("KuyF");s.n(a).a},gzyx:function(e,t,s){},i3ZA:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"box-card question-card"},[s("div",[e._v("\n        "+e._s(e.index+1)+"."+e._s(e.question.title)+"\n    ")]),e._v(" "),e._l(e.question.options,(function(t,a){return s("div",{key:t.id,staticClass:"answer"},[s("el-radio",{staticClass:"question",attrs:{label:t.answer,border:""},on:{change:e.commitAnswer},model:{value:e.choose.answer,callback:function(t){e.$set(e.choose,"answer",t)},expression:"choose.answer"}},[e._v("\n            "+e._s(e.indexDescription[a])+". "+e._s(t.answer)+"\n        ")])],1)}))],2)};a._withStripped=!0;var o=s("A3XI"),i={name:"Question",props:["question","index","paperId"],data:function(){return{choose:{id:this.question.id,paperId:this.paperId,answer:""},indexDescription:["A","B","C","D"]}},mounted:function(){this.choose.answer=this.question.answer},methods:{commitAnswer(){o.a.commitAnswer(this.choose).catch(e=>{this.choose.answer=""})}},components:{}},r=(s("ExdL"),s("KHd+")),n=Object(r.a)(i,a,[],!1,null,"dcbb040e",null);n.options.__file="app/components/exam/Question.vue";t.a=n.exports},i96B:function(e,t,s){"use strict";var a=s("PLEf");s.n(a).a},qqE7:function(e,t,s){"use strict";var a=s("z+Yr");s.n(a).a},uezO:function(e,t,s){},wuEK:function(e,t,s){"use strict";t.a={baseURL:"http://tyjp.ntu.edu.cn/api"}},wuo9:function(e,t,s){"use strict";var a=s("3Ovx");s.n(a).a},wyat:function(e,t,s){"use strict";var a=s("uezO");s.n(a).a},xATA:function(e,t,s){"use strict";s.r(t);var a=s("zpy1");s("Wokm"),s("33+x"),window.onload=function(){a.a.init(),a.a.vueG.$mount("#app")}},"z+Yr":function(e,t,s){},zpy1:function(e,t,s){"use strict";var a=s("9rUL"),o=s.n(a),i=s("jE9Z"),r=s("vDqi"),n=s.n(r),l=s("p/7L"),c=s.n(l),m=s("AOfK"),u=s.n(m),p=s("XJYT"),d=s.n(p),f=(s("D66Q"),s("ld0C")),h=s("0dTl"),v=s.n(h),g=(s("OUzL"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"center"},[s("el-card",{staticClass:"box-card login-card"},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"sign-title"},[e._v("实验室管理系统")])]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{prop:"name"}},[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("el-button",{staticClass:"sign-btn sign-local-btn",attrs:{type:"primary"},on:{click:e.signIn}},[e._v("登陆")])],1)],1)],1),e._v(" "),s("div",{staticClass:"foot"},[e._v("2020 版权所有 TEST")])])});g._withStripped=!0;var b=s("8DxK"),_={signIn:e=>b.a.post("/login/",e),getLoginUser:()=>b.a.get("/user/self/"),logOut:()=>b.a.get("/logout/"),test:()=>b.a.get("/"),updatePassword:function(e){return b.a.put("/user/password/",e)}},y={data:function(){return{form:{name:"",password:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{signIn:function(){this.$refs.form.validate(e=>{e&&_.signIn({username:this.form.name,password:this.form.password}).then(this.signCallback)})},signCallback:function(e){e&&(localStorage.setItem("ssm_token",e.token),this.$cookie.set("ssm_token",e.token),this.$router.push("index").catch(e=>e))}},mounted:function(){}},k=(s("ZnVh"),s("KHd+")),w=Object(k.a)(y,g,[],!1,null,"47e19f2a",null);w.options.__file="app/components/Sign.vue";var x=w.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",{staticClass:"header-bar",attrs:{gutter:24}},[s("el-col",{attrs:{span:4}},[s("div",{staticClass:"logo fl"},[s("i",{staticClass:"fa fa-bars fa-lg small-menu-bar",attrs:{"aria-hidden":"true"}}),e._v(" "),s("span",{staticClass:"logo-title"},[e._v("\n                    实验室管理系统\n                ")])])]),e._v(" "),s("el-col",{staticClass:"header-navi",attrs:{span:16}},[s("el-menu",{staticClass:"el-menu-demo navi-menu banner-back",attrs:{"default-active":e.activeMenuIndex,mode:"horizontal","text-color":"#fff","background-color":"#347dd6","active-text-color":"#fff",router:"true"},on:{select:e.handleSelect}},e._l(e.menus,(function(t){return s("el-menu-item",{key:t.id,attrs:{index:t.url}},[e._v("\n                    "+e._s(t.name)+"\n                ")])})),1)],1),e._v(" "),s("el-col",{staticClass:"header-bar-right",attrs:{span:4}},[s("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#347dd6","text-color":"#fff","active-text-color":"#fff"},on:{select:e.handleSelect}},[s("el-submenu",{attrs:{index:"userOper"}},[s("template",{slot:"title"},[e._v(e._s(e.$root.loginUser.name))]),e._v(" "),s("el-menu-item",{attrs:{index:"changePassword"}},[e._v("修改密码")]),e._v(" "),s("el-menu-item",{attrs:{index:"signOut"}},[e._v("退出")])],2)],1)],1)],1),e._v(" "),s("div",{staticClass:"main_center",attrs:{id:"main_center"}},[s("router-view")],1),e._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:e.changePasswordDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.changePasswordDialog=t}}},[[s("el-form",{ref:"passForm",attrs:{model:e.passForm,rules:e.passForm.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"新密码",prop:"newPass"}},[s("el-input",{attrs:{type:"password"},model:{value:e.passForm.newPass,callback:function(t){e.$set(e.passForm,"newPass",t)},expression:"passForm.newPass"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"confirmPass"}},[s("el-input",{attrs:{type:"password"},model:{value:e.passForm.confirmPass,callback:function(t){e.$set(e.passForm,"confirmPass",t)},expression:"passForm.confirmPass"}})],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.changePasswordDialog=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.changePassword}},[e._v("确 定")])],1)],2)],1)};C._withStripped=!0;var $={created:function(){},watch:{$route(e){this.setActive(e.path)}},data:function(){return{menus:[],activeMenuIndex:"",changePasswordDialog:!1,passForm:{newPass:"",confirmPass:"",rules:{newPass:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPass:[{required:!0,message:"请确认新密码",trigger:"blur"}]}}}},mounted:function(){_.getLoginUser().then(e=>{this.menus=e.menus,e.user.menus=e.menus,this.$root.loginUser=e.user,this.$root.$emit("menuInfo"),this.setActive(this.$route.path)}),window.onresize=()=>(()=>{this.$root.$emit("windowResize",document.body.clientWidth)})()},methods:{changePassword:function(){this.$refs.passForm.validate(e=>{e&&(this.passForm.newPass!==this.passForm.confirmPass?this.$notify.error({title:"错误",message:"新密码与确认密码不一致"}):_.updatePassword({password:this.passForm.newPass}).then(()=>{this.changePasswordDialog=!1,this.$message({message:"密码已修改",type:"success"})}))})},signOut:function(){_.logOut().then(()=>{this.$router.push("/sign").catch(e=>e)}),this.$cookie.delete("ssm_token"),localStorage.removeItem("ssm_token")},handleSelect(e){"signOut"===e?this.signOut():"changePassword"===e&&(this.changePasswordDialog=!0,this.$nextTick(()=>{this.$refs.passForm.resetFields()}))},setActive(e){let t=this.$root.loginUser.menus.filter(e=>"/index/app"===e.url)[0],s=this.$root.loginUser.menus.filter(e=>"/index/sys"===e.url)[0];"/index"===e||"/index/"===e||"/index/app"===e||"/index/app/"===e?t&&this.$router.push(t.childrens[0].url).catch(e=>e):"/index/sys"!==e&&"/index/sys/"!==e||s&&this.$router.push(s.childrens[0].url).catch(e=>e),this.activeMenuIndex=e.split("/").slice(0,3).join("/")}},components:{}},S=Object(k.a)($,C,[],!1,null,"46ef97b5",null);S.options.__file="app/components/Index.vue";var q=S.exports,T=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mobile-div"},[t("div",{staticClass:"full-height"},[t("div",{staticClass:"mobile-center-text message-error"},[this._v("\n            "+this._s(this.msg)+"\n        ")])])])};T._withStripped=!0;var D={name:"Error",data:function(){return{msg:"操作失败！"}},mounted:function(){this.$route.query.msg&&(this.msg=this.$route.query.msg)},methods:{},components:{}},I=(s("wuo9"),Object(k.a)(D,T,[],!1,null,"ea94942a",null));I.options.__file="app/components/Error.vue";var E=I.exports,P=function(){var e=this.$createElement;return(this._self._c||e)("left-menu-frame",{staticClass:"tab",attrs:{menus:this.leftMenus}})};P._withStripped=!0;var U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",[s("el-aside",[s("el-menu",{staticClass:"el-menu-vertical-demo my-menu left-menu",attrs:{"default-active":e.activeIndex,"text-color":"#303133","active-text-color":"#347dd6",router:"true",collapse:e.isCollapse},on:{select:e.handleSelect}},[e._l(e.oneLevelMenu,(function(t){return s("el-menu-item",{key:t.id,attrs:{index:t.url}},[s("i",{class:"fa "+t.icon+" fa-lg fa-inverse"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    "+e._s(t.name)+"\n                ")])])})),e._v(" "),e._l(e.MultiLevelMenu,(function(t){return s("el-submenu",{key:t.id,attrs:{index:t.url}},[s("template",{slot:"title"},[s("i",{class:"fa "+t.icon+" fa-lg fa-inverse"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        "+e._s(t.name)+"\n                    ")])]),e._v(" "),e._l(t.childrens,(function(t){return s("el-menu-item",{key:t.id,attrs:{index:t.url}},[s("template",{slot:"title"},[s("i",{class:"fa "+t.icon+" fa-lg fa-inverse"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n                            "+e._s(t.name)+"\n                        ")])])],2)}))],2)})),e._v(" "),s("el-menu-item",[s("i",{staticClass:"fa fa-bars fa-lg fa-inverse"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    菜单缩放\n                ")])])],2)],1),e._v(" "),s("el-main",[s("div",{staticClass:"main_right",attrs:{id:"main_right"}},[s("router-view")],1)])],1)};U._withStripped=!0;var M={name:"leftMenuFrame",data:function(){return{oneLevelMenu:[],MultiLevelMenu:[],isCollapse:!1,activeIndex:""}},props:["menus"],watch:{menus:function(e){this.oneLevelMenu=e.filter(e=>null===e.childrens),this.MultiLevelMenu=e.filter(e=>null!==e.childrens),setTimeout(()=>{this.setActive(this.$route.path)},10)},$route(e){this.setActive(e.path)}},mounted:function(){},methods:{handleSelect(e){e||(this.isCollapse=!this.isCollapse)},setActive(e){-1!==e.indexOf("sample")?this.activeIndex="/index/app/samplebanks":-1!==e.indexOf("question")?this.activeIndex="/index/app/questionbanks":this.activeIndex=e}},components:{}},O=(s("TD3R"),Object(k.a)(M,U,[],!1,null,"2b871da7",null));O.options.__file="app/components/util/LeftMenuFrame.vue";var R=O.exports,L={name:"AppComponent",mounted:function(){this.$root.loginUser.menus?this.setMenu():this.$root.$on("menuInfo",()=>{this.setMenu()})},watch:{},data:function(){return{leftMenus:[]}},methods:{setMenu(){let e=this.$root.loginUser.menus.filter(e=>"/index/app"===e.url)[0];e&&(this.leftMenus=e.childrens)}},components:{LeftMenuFrame:R}},F=Object(k.a)(L,P,[],!1,null,"876a08a0",null);F.options.__file="app/components/AppCompnent.vue";var V=F.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-div"},[s("el-form",{ref:"form",staticClass:"full-height",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",[s("el-select",{staticClass:"mobile-item",attrs:{placeholder:"请选择实验室"},on:{change:e.chooseLab},model:{value:e.form.laboratory.id,callback:function(t){e.$set(e.form.laboratory,"id",t)},expression:"form.laboratory.id"}},e._l(e.labs,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"appointmentDate"}},[s("el-date-picker",{staticClass:"mobile-item",attrs:{format:"yyyy-MM-dd",disabled:e.dateDisable,"picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd",type:"date",placeholder:e.chooseDateTip},on:{change:e.dateChoose},model:{value:e.form.bookDay,callback:function(t){e.$set(e.form,"bookDay",t)},expression:"form.bookDay"}})],1),e._v(" "),s("el-checkbox-group",{model:{value:e.chooseTimeZone,callback:function(t){e.chooseTimeZone=t},expression:"chooseTimeZone"}},e._l(this.availableTimeZone,(function(t){return s("el-checkbox",{key:t.id,staticClass:"time-zone",attrs:{label:t.id,border:""}},[e._v(e._s(t.name)+"\n            ")])})),1),e._v(" "),s("el-button",{staticClass:"btn-mobile-full",attrs:{type:"primary",plain:""},on:{click:e.commitAppointment}},[e._v("提交预约")])],1)],1)};A._withStripped=!0;var N={save:e=>e.id?b.a.put("/laboratory/"+e.id+"/",e):b.a.jsonPost("/laboratory/",e),get:e=>b.a.get("/laboratory/"+e.id+"/"),delete:e=>b.a.delete("/laboratory/"+e.id+"/"),gets:e=>b.a.get("/laboratory/list/",e),timeZone:()=>[{id:8,name:"8:00--9:00"},{id:9,name:"9:00--10:00"},{id:10,name:"10:00--11:00"},{id:11,name:"11:00--12:00"},{id:12,name:"12:00--13:00"},{id:13,name:"13:00--14:00"},{id:14,name:"14:00--15:00"},{id:15,name:"15:00--16:00"},{id:16,name:"16:00--17:00"},{id:17,name:"17:00--18:00"},{id:18,name:"18:00--19:00"},{id:19,name:"19:00--20:00"}]},j={size:{leftMenuCollapseWidth:980,pageNavSmallSize:620},page:{page:1,pageSize:10},allPage:{page:1,pageSize:99999999},navs:{questionbank:{name:"题库",url:"/index/app/questionbanks"},samplebank:{name:"标本库",url:"/index/app/samplebanks"}}};function z(e){return e<10?"0"+e:e}var B={getFormattedDate:e=>`${e.getFullYear()}-${z(e.getMonth()+1)}-${z(e.getDate())}`,clearObject(e){for(const t in e)"string"==typeof e[t]||"number"==typeof e[t]?e[t]="":"object"==typeof e[t]&&(e[t]instanceof Array?e[t]=[]:this.clearObject(e[t]))},priceCN(e){console.log(e);const t=["角","分"],s=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],a=[["元","万","亿"],["","拾","佰","仟"]],o=e<0?"欠":"";e=Math.abs(e);let i="";for(let a=0;a<t.length;a++)i+=(s[Math.floor(10*e*Math.pow(10,a))%10]+t[a]).replace(/零./,"");i=i||"整",e=Math.floor(e);for(let t=0;t<a[0].length&&e>0;t++){let o="";for(let t=0;t<a[1].length&&e>0;t++)o=s[e%10]+a[1][t]+o,e=Math.floor(e/10);i=o.replace(/(零.)*零$/,"").replace(/^$/,"零")+a[0][t]+i}return o+i.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},copyObject(e){let t=JSON.stringify(e);return JSON.parse(t)},message(e,t,s,a,o){o=o||3e3,e.$message({showClose:a,message:s,type:t,duration:o})},dateFormat(e,t){let s;const a={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(let t in a)s=new RegExp("("+t+")").exec(e),s&&(e=e.replace(s[1],1===s[1].length?a[t]:a[t].padStart(s[1].length,"0")));return e}},Z={save:e=>e.id?b.a.put("/laboratory/book/"+e.id+"/",e):b.a.jsonPost("/laboratory/book/",e),get:e=>b.a.get("/laboratory/book/"+e.id+"/"),delete:e=>b.a.delete("/laboratory/book/"+e.id+"/"),gets:e=>b.a.get("/laboratory/book/list/",e)},H={data:function(){return{form:{laboratory:{id:""},bookDay:"",bookHour:"",bookHour2:""},availableTimeZone:[],labs:[],pickerOptions:{disabledDate:e=>this.disabled(e)},chooseTimeZone:[],aviStart:"",aviEnd:"",applyBookingDates:[],dateDisable:!0,chooseDateTip:"选择预约时间(先选择实验室)"}},watch:{},methods:{disabled:function(e){return!this.applyBookingDates.includes(B.dateFormat("YYYY-mm-dd",new Date(e)))},dateChoose(e){this.form.bookDay=e},commitAppointment(){this.form.laboratory.id?this.form.bookDay?0===this.chooseTimeZone.length?B.message(this,"error","请选择预约时段",!0):this.chooseTimeZone.length>2?B.message(this,"error","选择的时段不能超过2小时",!0):(this.form.bookHour=this.chooseTimeZone[0],2===this.chooseTimeZone.length?this.form.bookHour2=this.chooseTimeZone[1]:this.form.bookHour2="",Z.save(this.form).then(e=>{B.message(this,"success","预约成功!",!0),Xt.vueG.$router.push("/wx/appointments").catch(e=>e)})):B.message(this,"error","请选择预约日期",!0):B.message(this,"error","请选择实验室",!0)},chooseLab(e){N.get({id:e}).then(e=>{let t=e.laboratory.allowHours.split(",");this.availableTimeZone=N.timeZone().filter(e=>t.includes(String(e.id))),e.laboratory.applyBookingDates&&(this.applyBookingDates=e.laboratory.applyBookingDates,this.dateDisable=!1,this.chooseDateTip="选择预约时间")})}},mounted:function(){N.gets(j.allPage).then(e=>{this.labs=e.list}),document.title="实验室预约"}},Q=(s("gNzl"),Object(k.a)(H,A,[],!1,null,"24fdc8d2",null));Q.options.__file="app/components/appointment/Appointment.vue";var G=Q.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-div"},[s("div",{staticClass:"full-height"},[e._l(e.appointments,(function(t){return e.appointments.length>0?s("table",{key:t.id,staticClass:"form-table mobile-item"},[s("tr",[s("th",{staticStyle:{width:"30%"}},[e._v("实验室")]),e._v(" "),s("td",[e._v(e._s(t.laboratory.name))])]),e._v(" "),s("tr",[s("th",{staticStyle:{width:"30%"}},[e._v("日期")]),e._v(" "),s("td",[e._v(e._s(t.bookDay))])]),e._v(" "),s("tr",[s("th",{staticStyle:{width:"30%"}},[e._v("时间段")]),e._v(" "),s("td",[e._v(e._s(e._f("formatZone")(t.bookHour)))])]),e._v(" "),s("tr",[s("td",{attrs:{colspan:"2"}},[s("el-button",{staticClass:"mobile-item-width",attrs:{type:"danger",plain:""},on:{click:function(s){return e.cancel(t)}}},[e._v("取消预约\n                    ")])],1)])]):e._e()})),e._v(" "),0===e.appointments.length?s("el-alert",{attrs:{title:"无预约记录",type:"info",center:"","show-icon":"",closable:!1}}):e._e()],2)])};K._withStripped=!0;var Y={name:"Appointments",data:function(){return{appointments:[]}},filters:{formatZone:function(e){return N.timeZone().filter(t=>t.id===e)[0].name}},mounted:function(){this.list(),document.title="我的预约"},methods:{splitAppointment(e){for(let t=0;t<e.length;t++)if(e[t].bookHour2){let s=B.copyObject(e[t]);s.bookHour=s.bookHour2,s.bookHour2="",e[t].bookHour2="",this.appointments.push(e[t]),this.appointments.push(s)}else this.appointments.push(e[t])},cancel(e){this.$confirm("是否取消"+e.laboratory.name+e.bookDay+"日"+this.$options.filters.formatZone(e.bookHour)+"的预约?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{let t={},s=this.appointments.filter(t=>t.id===e.id);1===s.length?Z.delete({id:e.id}).then(e=>{this.cancelOk()}):(t=s.filter(t=>t.bookHour!==e.bookHour)[0],Z.save(t).then(e=>{this.cancelOk()}))}).catch(()=>{})},cancelOk(){B.message(this,"success","预约已取消",!0),this.list()},list(){this.appointments=[],Z.gets(j.allPage).then(e=>{let t=e.list;this.splitAppointment(t)})}},components:{}},W=(s("IbZz"),Object(k.a)(Y,K,[],!1,null,"7e66f291",null));W.options.__file="app/components/appointment/Appointments.vue";var X=W.exports,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("nav-component",{attrs:{data:e.navData}}),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加题库")])],1)],1),e._v(" "),s("table-component",{staticStyle:{"margin-top":"20px"},attrs:{tableConfig:e.tableConfig}})],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"考试抽取题数",prop:"questionCount"}},[s("el-input",{model:{value:e.form.questionCount,callback:function(t){e.$set(e.form,"questionCount",t)},expression:"form.questionCount"}})],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCommit()}}},[e._v("确 定")])],1)],2)],1)};J._withStripped=!0;var ee=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableConfig.data,border:"",stripe:"","max-height":e.maxHeight},on:{"selection-change":e.tableConfig.checkBoxChange}},[e.tableConfig.checkable?s("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),s("el-table-column",{attrs:{label:"#",type:"index",fixed:"",width:"50"}}),e._v(" "),e._l(e.tableConfig.cols,(function(t){return s("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,fixed:t.fixed,formatter:t.formatter,sortable:t.sortable,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return[t.tag?s("vif",[s("el-tag",{attrs:{type:t.tagType(a.row[t.prop]),size:t.tagSize}},[e._v("\n                        "+e._s(e.colValue(a.row,t,e.getProp(a.row,t.prop)))+"\n                    ")])],1):s("vif",[e._v("\n                    "+e._s(e.colValue(a.row,t,e.getProp(a.row,t.prop)))+"\n                ")])]}}],null,!0)})})),e._v(" "),s("el-table-column",{attrs:{prop:"roleOper",fixed:"right",width:e.tableConfig.operWidth,label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.tableConfig.oper,(function(a){return s("el-tooltip",{key:a.tip.content,staticClass:"item",attrs:{effect:"dark",content:a.tip.content,placement:a.tip.placement}},[s("i",{class:a.class,on:{click:function(s){return e.click(t.row,a.event,a.check)}}})])}))}}])})],2),e._v(" "),e.tableConfig.page?s("el-pagination",{staticClass:"page-nav",attrs:{background:"",small:e.small,"current-page":e.tableConfig.currentPage,layout:"prev, pager, next",total:e.tableConfig.total},on:{"update:currentPage":function(t){return e.$set(e.tableConfig,"currentPage",t)},"update:current-page":function(t){return e.$set(e.tableConfig,"currentPage",t)},"current-change":e.handleCurrentChange}}):e._e(),e._v(" "),s("el-dialog",{attrs:{title:"提示",visible:e.deleteConfirm,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.deleteConfirm=t}}},[s("span",[e._v("确认删除？")]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.deleteConfirm=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteConfirm=!1,e.toDelete()}}},[e._v("确 定")])],1)])],1)};ee._withStripped=!0;var te={data:function(){return{small:!1,maxHeight:620,deleteConfirm:!1,deleteOper:{event:{},row:{}}}},props:["tableConfig"],watch:{},methods:{click(e,t,s){s?(this.deleteConfirm=!0,this.deleteOper.event=t,this.deleteOper.row=e):t(e)},toDelete(){this.deleteOper.event(this.deleteOper.row)},handleCurrentChange:function(e){this.tableConfig.pageMethod(e)},elementSize:function(e){this.small=e<=j.size.pageNavSmallSize},getProp(e,t){if(-1!==t.indexOf(".")){let s=e;return t.split(".").forEach(e=>{s&&(s=s[e])}),s}return e[t]},colValue:(e,t,s)=>t.formatter?"raw"===t.formatterType?t.formatter(e):t.formatter(s):s},mounted:function(){let e=this;e.elementSize(document.body.clientWidth),Xt.vueG.$on("windowResize",t=>{e.elementSize(t)})}},se=Object(k.a)(te,ee,[],!1,null,"88b8f542",null);se.options.__file="app/components/util/TableComponent.vue";var ae=se.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card nav-card"},[s("el-breadcrumb",{attrs:{separator:"/"}},e._l(this.data,(function(t){return s("el-breadcrumb-item",{key:t.url,attrs:{to:{path:t.url}}},[e._v("\n                    "+e._s(t.name)+"\n                ")])})),1)],1)],1)],1)};oe._withStripped=!0;var ie={name:"NavComponent",props:["data"],data:function(){return{}},methods:{},mounted:function(){}},re=Object(k.a)(ie,oe,[],!1,null,"708b282a",null);re.options.__file="app/components/util/NavComponent.vue";var ne=re.exports,le=s("A3XI"),ce={saveUser:e=>b.a.jsonPost("/user/",e),updateUser:e=>b.a.put("/user/"+e.id+"/",e),getUsers:e=>b.a.get("/user/list/",e),getUser:e=>b.a.get("/user/"+e.id+"/"),deleteUser:e=>b.a.delete("/user/"+e.id+"/")},me={name:"QuestionBanks",data:function(){return{navData:[j.navs.questionbank],visible:!1,form:{id:"",name:"",questionCount:""},rules:{name:[{required:!0,message:"请输入库名",trigger:"blur"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"name",label:"名称",width:"600"}],oper:[{class:"fa fa-pencil-square-o fa-lg click-fa warning-fa",tip:{content:"修改",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"right"},event:this.delete,check:!0},{class:"fa fa-file-text-o fa-lg click-fa primary-fa",tip:{content:"查看",placement:"top"},event:this.view}]}}},mounted:function(){this.list()},methods:{add(){this.visible=!0,this.$nextTick(()=>{this.$refs.form.resetFields(),this.form.id=""})},edit(e){le.a.getQB({id:e.id}).then(e=>{this.visible=!0,this.$nextTick(()=>{this.form=e.question_bank})})},view(e){Xt.vueG.$router.push({path:"questionbank",query:{id:e.id,name:e.name}}).catch(e=>e)},addCommit(){this.$refs.form.validate(e=>{e&&(this.visible=!1,le.a.saveQB(this.form).then(()=>{this.operSuccess(this),this.visible=!1}))})},delete(e){le.a.deleteQB({id:e.id}).then(()=>{this.operSuccess(this)})},toPage:function(e){this.list({page:e})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,le.a.getQBs(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})},operSuccess(e){this.visible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})}},components:{TableComponent:ae,NavComponent:ne}},ue=Object(k.a)(me,J,[],!1,null,"6ef1ec24",null);ue.options.__file="app/components/exam/QuestionBanks.vue";var pe=ue.exports,de=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("nav-component",{attrs:{data:e.navData}}),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加题目")])],1)],1),e._v(" "),s("table-component",{staticStyle:{"margin-top":"20px"},attrs:{tableConfig:e.tableConfig}})],1)],1)],1),e._v(" "),s("el-dialog",{staticClass:"form-dialog",attrs:{title:"题目信息",visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px",inline:!0}},[s("el-form-item",{attrs:{label:"题目",prop:"title"}},[s("el-input",{staticStyle:{width:"700px"},attrs:{type:"textarea"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),e._l(e.form.options,(function(t,a){return s("div",[s("el-form-item",{attrs:{label:"选项",prop:"options."+a+".answer",rules:{required:!0,message:"请填写选项内容",trigger:"blur"}}},[s("el-input",{staticStyle:{width:"560px"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"option.answer"}}),e._v(" "),s("el-tooltip",{attrs:{content:t.correct?"正确答案":"错误答案",placement:"top"}},[s("el-switch",{staticStyle:{"margin-left":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.correct,callback:function(s){e.$set(t,"correct",s)},expression:"option.correct"}})],1)],1),e._v(" "),s("el-button",{on:{click:function(s){return s.preventDefault(),e.removeOption(t)}}},[e._v("删除")])],1)}))],2)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{on:{click:e.addOption}},[e._v("新增选项")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCommit()}}},[e._v("确 定")])],1)],2)],1)};de._withStripped=!0;var fe={name:"QuestionBank",data:function(){return{navData:[j.navs.questionbank,{name:this.$route.query.name,url:"/index/app/questionbank?id="+this.$route.query.id+"&name="+this.$route.query.name}],visible:!1,form:{id:"",bankId:this.$route.query.id,title:"",options:[{answer:"",correct:!1}]},rules:{question:[{required:!0,message:"请填写题目内容",trigger:"blur"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"title",label:"题目",width:"700"}],oper:[{class:"fa fa-pencil-square-o  fa-lg click-fa warning-fa",tip:{content:"编辑",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"right"},event:this.delete,check:!0}]}}},mounted:function(){this.list()},methods:{add(){this.visible=!0,this.$nextTick(()=>{this.$refs.form.resetFields(),this.form.id=""})},edit(e){le.a.getQuestion({id:e.id}).then(e=>{this.visible=!0,this.form=e.question})},delete(e){le.a.deleteQuestion({id:e.id}).then(()=>{this.operSuccess(this)})},addCommit(){this.$refs.form.validate(e=>{e&&le.a.saveQuestion(this.form).then(()=>{this.operSuccess(this),this.visible=!1})})},addOption:function(){this.form.options.push({answer:"",correct:!1})},removeOption:function(e){let t=this.form.options.indexOf(e);t>0?this.form.options.splice(t,1):this.$message({message:"第一行无法删除",type:"warning"})},toPage:function(e){this.list({page:e})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,t.bankId=this.$route.query.id,le.a.getQuestions(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})},operSuccess(e){this.visible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})}},components:{TableComponent:ae,NavComponent:ne}},he=Object(k.a)(fe,de,[],!1,null,"ca025c56",null);he.options.__file="app/components/exam/QuestionBank.vue";var ve=he.exports,ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("nav-component",{attrs:{data:e.navData}}),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加标本大类")])],1)],1),e._v(" "),s("table-component",{staticStyle:{"margin-top":"10px"},attrs:{tableConfig:e.tableConfig}})],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"二维码颜色",prop:"color"}},[s("el-color-picker",{model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}})],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCommit()}}},[e._v("确 定")])],1)],2)],1)};ge._withStripped=!0;var be={saveSB:e=>e.id?b.a.put("/specimen/bank/"+e.id+"/",e):b.a.jsonPost("/specimen/bank/",e),getSB:e=>b.a.get("/specimen/bank/"+e.id+"/"),deleteSB:e=>b.a.delete("/specimen/bank/"+e.id+"/"),getSBs:e=>b.a.get("/specimen/bank/list/",e),saveSample:e=>e.id?b.a.put("/specimen/"+e.id+"/",e):b.a.jsonPost("/specimen/",e),getSample:e=>b.a.get("/specimen/"+e.id+"/"),study:e=>b.a.get("/specimen/study/"+e.id+"/?interval="+e.interval),deleteSample:e=>b.a.delete("/specimen/"+e.id+"/"),getSamples:e=>b.a.get("/specimen/list/",e)},_e={name:"SampleBanks",data:function(){return{navData:[j.navs.samplebank],visible:!1,form:{id:"",name:"",color:"#347dd6"},rules:{name:[{required:!0,message:"请输入大类名",trigger:"blur"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"name",label:"名称",width:"600"}],oper:[{class:"fa fa-pencil-square-o fa-lg click-fa warning-fa",tip:{content:"修改",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"right"},event:this.delete,check:!0},{class:"fa fa-file-text-o fa-lg click-fa primary-fa",tip:{content:"查看",placement:"top"},event:this.view}]}}},mounted:function(){this.list()},methods:{add(){this.visible=!0,this.$nextTick(()=>{this.$refs.form.resetFields(),this.form.id=""})},edit(e){be.getSB({id:e.id}).then(e=>{this.visible=!0,this.$nextTick(()=>{this.form=e.specimen_bank})})},view(e){this.$router.push({path:"samplebank",query:{id:e.id,name:e.name}}).catch(e=>e)},addCommit(){this.$refs.form.validate(e=>{e&&be.saveSB(this.form).then(()=>{this.operSuccess(this),this.visible=!1})})},delete(e){be.deleteSB({id:e.id}).then(()=>{this.operSuccess(this)})},toPage:function(e){this.list({page:e})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,be.getSBs(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})},operSuccess(e){this.visible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})}},components:{TableComponent:ae,NavComponent:ne}},ye=Object(k.a)(_e,ge,[],!1,null,"365cdf96",null);ye.options.__file="app/components/sample/SampleBanks.vue";var ke=ye.exports,we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("nav-component",{attrs:{data:e.navData}}),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加标本")])],1)],1),e._v(" "),s("table-component",{staticStyle:{"margin-top":"20px"},attrs:{tableConfig:e.tableConfig}})],1)],1)],1),e._v(" "),s("el-dialog",{staticClass:"form-dialog",attrs:{title:"标本信息",visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px",inline:!1}},[s("el-form-item",{attrs:{label:"标本编码",prop:"code"}},[s("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"实验室",prop:"laboratoryId"}},[s("el-select",{staticClass:"mobile-item-width",attrs:{placeholder:"请选择实验室"},on:{change:e.chooseLab},model:{value:e.form.laboratoryId,callback:function(t){e.$set(e.form,"laboratoryId",t)},expression:"form.laboratoryId"}},e._l(e.labs,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"标本名称",prop:"name"}},[s("el-input",{staticClass:"mobile-item-width",attrs:{type:"textarea"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"标本描述",prop:"description"}},[s("el-input",{staticClass:"mobile-item-width",attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"标本图片",prop:"imgFiles"}},[s("el-upload",{attrs:{action:e.uploadAction,"list-type":"picture-card",name:"formFile",headers:e.uploadHeaders,"with-credentials":"true","on-success":e.imgSuccess,"on-preview":e.handlePictureCardPreview,"before-remove":e.beforeRemove,"on-remove":e.handleRemove,"file-list":e.form.imgFiles}},[s("i",{staticClass:"el-icon-plus"})]),e._v(" "),s("el-dialog",{attrs:{visible:e.picCardVisible,size:"tiny","append-to-body":""},on:{"update:visible":function(t){e.picCardVisible=t}}},[s("img",{attrs:{width:"100%",src:e.picCardUrl,alt:""}})])],1),e._v(" "),s("el-form-item",{attrs:{label:"音频文件",prop:"audioFile"}},[s("el-upload",{attrs:{action:e.uploadAction,name:"formFile",headers:e.uploadHeaders,"with-credentials":"true","on-success":e.audioSuccess,"before-remove":e.beforeRemove,"on-remove":e.handleAudioRemove,"file-list":e.form.audioFile}},[e.form.audioFile.length?s("audio",{ref:"audio",attrs:{src:e.form.audioFile[0].url,controls:"controls"}}):s("el-button",{attrs:{type:"primary"}},[e._v("\n                            上传"),s("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),e._v(" "),s("el-divider",[e._v("知识点")]),e._v(" "),e._l(e.form.kps,(function(t,a){return s("div",[s("el-form-item",{attrs:{label:"标题",prop:"kps."+a+".title"}},[s("el-input",{staticStyle:{width:"626px"},attrs:{type:"text"},model:{value:t.title,callback:function(s){e.$set(t,"title",s)},expression:"kp.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"内容",prop:"kps."+a+".content"}},[s("el-input",{staticStyle:{width:"626px"},attrs:{type:"textarea"},model:{value:t.content,callback:function(s){e.$set(t,"content",s)},expression:"kp.content"}}),e._v(" "),s("el-button",{on:{click:function(s){return s.preventDefault(),e.removeKp(t)}}},[e._v("删除")])],1)],1)})),e._v(" "),s("el-button",{attrs:{type:"success",plain:""},on:{click:e.addKp}},[e._v("新增知识点")])],2)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCommit()}}},[e._v("确 定")])],1)],2),e._v(" "),s("el-dialog",{attrs:{title:"标本二维码",visible:e.qrVisisble,width:"440px","close-on-click-modal":!1},on:{"update:visible":function(t){e.qrVisisble=t}}},[[s("section",{ref:"qrArea",staticStyle:{position:"relative"}},[s("div",{ref:"qrNo",staticClass:"code"},[e._v(e._s(e.qr.code))]),e._v(" "),s("vue-qr",{attrs:{correctLevel:3,autoColor:!1,colorDark:e.qr.color,logoSrc:e.qr.logoSrc,text:e.qr.url,size:e.qr.size,margin:0,logoMargin:3}})],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.qrVisisble=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.printQr()}}},[e._v("打印")]),e._v(" "),s("el-button",{attrs:{type:"success"},on:{click:function(t){return e.downloadQr()}}},[e._v("下载")])],1)],2)],1)};we._withStripped=!0;var xe=s("wuEK"),Ce={upload:function(e,t){return b.a.axiosUpload("/file/upload/",e,t)},getToken:()=>b.a.getToken()},$e=s("ZY9c"),Se=s.n($e),qe=s("wOnQ"),Te=s.n(qe),De={name:"SampleBank",watch:{visible(e){e?(this.$refs.form&&this.$refs.form.resetFields(),this.form.kps=[{title:"",content:""}]):this.$refs.audio&&this.$refs.audio.pause()}},data:function(){return{visible:!1,qrVisisble:!1,picCardVisible:!1,picCardUrl:"",navData:[j.navs.samplebank,{name:this.$route.query.name,url:"/index/app/samplebank?id="+this.$route.query.id+"&name="+this.$route.query.name}],form:{id:"",code:"",bankId:this.$route.query.id,laboratoryId:"",name:"",description:"",imgFiles:[],audioFile:[],kps:[{title:"",content:""}],imgIds:"",audioId:""},rules:{code:[{required:!0,message:"请填写标本编码",trigger:"blur"}],"laboratory.id":[{required:!0,message:"请选择实验室",trigger:"blur"}],name:[{required:!0,message:"请填写标本名称",trigger:"blur"}],audioFile:[{required:!0,message:"请上传音频",trigger:"blur"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"name",label:"标本名称",width:"600"}],oper:[{class:"fa fa-pencil-square-o  fa-lg click-fa warning-fa",tip:{content:"编辑",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"top"},event:this.delete,check:!0},{class:"fa fa-qrcode fa-lg click-fa success-fa",tip:{content:"二维码",placement:"right"},event:this.genQr}]},uploadType:"",qr:{url:"",icon:"",color:"",logoSrc:"",size:400,code:"",name:""},labs:[]}},mounted:function(){this.list(),this.uploadAction=xe.a.baseURL+"/file/upload/",this.uploadHeaders={Authorization:Ce.getToken()},N.gets(j.allPage).then(e=>{this.labs=e.list}),be.getSB({id:this.$route.query.id}).then(e=>{this.qr.color=e.specimen_bank.color})},methods:{add(){this.form.id="",this.visible=!0},edit(e){be.getSample({id:e.id}).then(e=>{this.visible=!0,this.$nextTick(()=>{for(let t in e.specimen)this.form[t]=e.specimen[t];this.form.imgIds&&this.form.imgIds.split(",").forEach(e=>{this.form.imgFiles.push({id:e,url:xe.a.baseURL+"/file/download/?id="+e})}),this.form.audioId&&this.form.audioFile.push({id:this.form.audioId,name:e.specimen.audio.name,url:xe.a.baseURL+"/file/download/?id="+this.form.audioId})})})},delete(e){be.deleteSample({id:e.id}).then(()=>{this.operSuccess(this)})},addCommit(){this.$refs.form.validate(e=>{e&&(this.form.imgIds=this.form.imgFiles.map(e=>e.id).toString(),this.form.audioId=this.form.audioFile[0].id,be.saveSample(this.form).then(()=>{this.operSuccess(this),this.visible=!1}))})},toPage:function(e){this.list({page:e})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,t.bankId=this.$route.query.id,be.getSamples(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})},operSuccess(e){this.visible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})},imgSuccess:function(e,t){this.form.imgFiles.push({id:e.id,uid:t.uid,url:xe.a.baseURL+"/file/download/?id="+e.id})},audioSuccess:function(e,t){this.form.audioFile.push({id:e.id,uid:t.uid,name:t.name,url:xe.a.baseURL+"/file/download/?id="+e.id})},beforeRemove(e){return this.$confirm(`确定移除 ${e.name}？`)},handlePreview(e){window.open(xe.a.baseURL+e.url)},handleRemove(e){this.form.imgFiles=this.form.imgFiles.filter(t=>t.uid!==e.uid)},handleAudioRemove(){this.form.audioFile=[]},handlePictureCardPreview(e){this.picCardUrl=e.url,this.picCardVisible=!0},genQr(e){this.qr.name=e.name,this.qr.code=e.code,this.qr.url=xe.a.baseURL.replace("api","")+"/#/wx/sample?id="+e.id,this.qrVisisble=!0,this.$nextTick(()=>{console.log(this.$refs.qrNo),this.$refs.qrNo.style.top=this.qr.size/2-43+"px",this.$refs.qrNo.style.left=this.qr.size/2-43+"px",this.$refs.qrNo.style.border="1px solid "+this.qr.color,this.$refs.qrNo.style.color=this.qr.color})},downloadQr(){window.pageYoffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0;let e=this.$refs.qrArea,t=e.offsetWidth,s=e.offsetHeight;Te()(e,{width:t,heigth:s,backgroundColor:"#ffffff",dpi:2*window.devicePixelRatio,scale:2,X:0,Y:0,scrollX:-3,scrollY:0,useCORS:!0,allowTaint:!0}).then(e=>{let t=e.toDataURL(),s=document.createElement("a");s.download=this.qr.name;let a=new MouseEvent("click");s.href=t,s.dispatchEvent(a)})},printQr(){this.$print(this.$refs.qrArea)},addKp(){this.form.kps.push({title:"",content:""})},removeKp(e){let t=this.form.kps.indexOf(e);t>0?this.form.kps.splice(t,1):this.$message({message:"第一行无法删除",type:"warning"})}},components:{TableComponent:ae,NavComponent:ne,VueQr:Se.a}},Ie=(s("LG+U"),Object(k.a)(De,we,[],!1,null,"549232a4",null));Ie.options.__file="app/components/sample/SampleBank.vue";var Ee=Ie.exports,Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-div"},[s("div",{staticClass:"full-height"},[s("el-card",{staticClass:"box-card mobile-card"},[s("div",{staticClass:"sample-title",attrs:{slot:"header"},slot:"header"},[s("span",[e._v(e._s(e.name))])]),e._v(" "),s("div",{staticClass:"mobile-item-row"},[s("aplayer",{attrs:{autoplay:"",music:e.audio}})],1),e._v(" "),s("div",{staticClass:"mobile-item-row sample-description"},[e._v(e._s(e.description))]),e._v(" "),e._l(e.imgs,(function(e){return s("div",{staticClass:"mobile-item-row"},[s("img",{staticStyle:{width:"100%"},attrs:{src:e,preview:"0",alt:""}})])})),e._v(" "),s("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.kps,(function(t){return s("el-collapse-item",{key:t.id,staticClass:"kp-title",attrs:{name:t.id}},[s("template",{slot:"title"},[s("span",{style:"color:"+(t.studied?"green":""),on:{click:function(s){return e.studyKp(t.id)}}},[e._v(e._s(t.title))])]),e._v(" "),s("div",{staticClass:"kp-content"},[e._v(e._s(t.content))])],2)})),1)],2)],1)])};Pe._withStripped=!0;var Ue=s("D313"),Me=s.n(Ue),Oe=s("TNfx"),Re={name:"SampleMobile",data:function(){return{name:"",description:"",imgs:[],audio:{},kps:[],interval:10,studyChecker:{},fingerDistance:0}},mounted:function(){be.study({id:this.$route.query.id,interval:this.interval}).then(e=>{this.name=e.specimen.name,this.description=e.specimen.description;let t="";e.specimen.imgIds.split(",").forEach(e=>{t||(t=e),this.imgs.push(xe.a.baseURL+"/file/download/?id="+e)}),this.sound=xe.a.baseURL+"/file/download/?id="+e.specimen.audioId,this.kps=e.specimen.kps,this.audio={title:e.specimen.name,artist:" ",src:xe.a.baseURL+"/file/download/?id="+e.specimen.audioId,pic:xe.a.baseURL+"/file/download/?id="+t}}).catch(e=>{clearInterval(this.studyChecker),Oe.a.toError(this)}),document.title="标本信息",document.addEventListener("touchstart",this.touchHandler,!0),document.addEventListener("touchmove",this.touchHandler,!0),document.addEventListener("touchend",this.touchHandler,!0),document.addEventListener("touchcancel",this.touchHandler,!0),this.studyChecker=setInterval(()=>{be.study({id:this.$route.query.id,interval:this.interval}).catch(e=>{clearInterval(this.studyChecker),Oe.a.toError(this)})},11e3)},beforeDestroy(){clearInterval(this.studyChecker)},methods:{study(){console.log(111)},studyKp(e){console.log(e)},touchHandler(e){let t=e.changedTouches,s=t[0],a="";switch(e.type){case"touchstart":a="mousedown";break;case"touchmove":a="mousemove";break;case"touchend":a="mouseup";break;default:return}let o=document.createEvent("MouseEvent");if(2===t.length){if("mousemove"===a){let e=t;this.getDistance(e[0],e[1])<this.fingerDistance&&(o=document.createEvent("WheelEvent"),o.initEvent(),this.$message("1")),this.fingerDistance=this.getDistance(e[0],e[1])}}else o.initMouseEvent(a,!0,!0,window,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null);s.target.dispatchEvent(o)},getDistance(e,t){let s=t.pageX-e.pageX,a=t.pageY-e.pageY;return Math.sqrt(s*s+a*a)}},components:{Aplayer:Me.a}},Le=(s("i96B"),Object(k.a)(Re,Pe,[],!1,null,"023f80d8",null));Le.options.__file="app/components/sample/SampleMobile.vue";var Fe=Le.exports,Ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("nav-component",{attrs:{data:e.navData}}),e._v(" "),s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加标本")])],1)],1),e._v(" "),s("table-component",{staticStyle:{"margin-top":"20px"},attrs:{tableConfig:e.tableConfig}})],1)],1)],1),e._v(" "),s("el-dialog",{staticClass:"form-dialog",attrs:{title:"标本信息",visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px",inline:!0}},[s("el-form-item",{attrs:{label:"题目",prop:"question"}},[s("el-input",{staticStyle:{width:"700px"},attrs:{type:"textarea",rules:{required:!0,message:"请填写题目内容",trigger:"blur"}},model:{value:e.form.question,callback:function(t){e.$set(e.form,"question",t)},expression:"form.question"}})],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCommit()}}},[e._v("确 定")])],1)],2)],1)};Ve._withStripped=!0;var Ae={name:"OneSample",data:function(){return{navData:[j.navs.samplebank,{name:this.$route.params.typeName,url:"/index/onesample"}],visible:!1,form:{name:"",img:"",description:"",kps:[]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"sampleName",label:"标本名称",width:"900"}],oper:[{class:"fa fa fa-user-o fa-lg click-fa primary-fa",tip:{content:"查看",placement:"right"},event:this.view}]},list:[]}},mounted:function(){this.tableConfig.currentPage=1,this.tableConfig.data=this.list},methods:{add(){this.visible=!0},view(){},addCommit(){this.$refs.form.validate(e=>{e&&(console.log(this.form),this.list.push(this.form),this.tableConfig.data=this.list,this.tableConfig.total=this.list.length)})}},components:{TableComponent:ae,NavComponent:ne}},Ne=Object(k.a)(Ae,Ve,[],!1,null,"4f21bc20",null);Ne.options.__file="app/components/sample/SampleInfo.vue";var je=Ne.exports,ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-div"},[s("div",{staticClass:"full-height"},["started"===e.status?s("el-tag",{staticClass:"time-tip",attrs:{type:"warning"}},[s("div",{staticClass:"timer"},[e._v("\n                考试剩余时间:"),s("span",{staticClass:"hours"}),e._v(":"),s("span",{staticClass:"minutes"}),e._v(":"),s("span",{staticClass:"seconds"})])]):e._e(),e._v(" "),e._l(e.questions,(function(t,a){return s("question",{key:t.id,attrs:{question:t,index:a,paperId:e.paperId}})})),e._v(" "),"not-started"===e.status?s("div",{staticClass:"content-center vertical-center",staticStyle:{height:"100%"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.start}},[e._v("开始考试")])],1):e._e(),e._v(" "),"started"===e.status?s("el-card",{staticClass:"box-card content-center submit-card"},[s("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交考卷")])],1):e._e()],2)])};ze._withStripped=!0;var Be=s("Tyvh").a,Ze=(s("WcfB"),Object(k.a)(Be,ze,[],!1,null,"a5e094ee",null));Ze.options.__file="app/components/exam/Paper.vue";var He=Ze.exports,Qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-card",{staticClass:"box-card box-card-no-nav"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("添加实验室")])],1)],1),e._v(" "),s("table-component",{staticStyle:{"margin-top":"20px"},attrs:{tableConfig:e.tableConfig}})],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"实验室信息",visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"编号",prop:"code"}},[s("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"容纳人数",prop:"capacity"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.capacity,callback:function(t){e.$set(e.form,"capacity",t)},expression:"form.capacity"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"预留人数",prop:"reserve"}},[s("el-input",{attrs:{type:"number"},model:{value:e.form.reserve,callback:function(t){e.$set(e.form,"reserve",t)},expression:"form.reserve"}})],1),e._v(" "),s("el-divider",[e._v("开放时段")]),e._v(" "),s("el-checkbox-group",{model:{value:e.chooseTimeZone,callback:function(t){e.chooseTimeZone=t},expression:"chooseTimeZone"}},e._l(this.availableTimeZone,(function(t){return s("el-checkbox",{key:t.id,staticClass:"time-zone",attrs:{label:t.id,border:""}},[e._v(e._s(t.name)+"\n                ")])})),1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addCommit()}}},[e._v("确 定")])],1)],1)],1)};Qe._withStripped=!0;var Ge={name:"Lab",data:function(){return{navData:[j.navs.questionbank],visible:!1,zoneVisible:!1,form:{code:"",name:"",capacity:0,reserve:0,allowHours:""},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"code",label:"编号",width:"200"},{prop:"name",label:"名称",width:"300"},{prop:"capacity",label:"容纳人数",width:"100"},{prop:"reserve",label:"预留人数",width:"100"}],oper:[{class:"fa fa-pencil-square-o fa-lg click-fa warning-fa",tip:{content:"查看",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"right"},event:this.delete,check:!0}]},rules:{code:[{required:!0,message:"请输入编号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],capacity:[{required:!0,message:"请输入容纳人数",trigger:"blur"}],reserve:[{required:!0,message:"请选择预留人数",trigger:"change"}]},chooseTimeZone:[],availableTimeZone:N.timeZone()}},mounted:function(){this.list()},methods:{add(){this.visible=!0,this.chooseTimeZone=[],this.$nextTick(()=>{this.$refs.form.resetFields()})},edit(e){this.chooseTimeZone=[],N.get({id:e.id}).then(e=>{this.visible=!0,this.$nextTick(()=>{this.form=e.laboratory,this.form.allowHours.split(",").forEach(e=>{this.chooseTimeZone.push(Number(e))})})})},addCommit(){this.$refs.form.validate(e=>{e&&(0===this.chooseTimeZone.length?this.$notify.error({title:"错误",message:"请选择开放时段"}):(this.form.allowHours=this.chooseTimeZone.toString(),N.save(this.form).then(()=>{this.operSuccess(this),this.visible=!1})))})},delete(e){N.delete({id:e.id}).then(()=>{this.operSuccess(this)})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,N.gets(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})},operSuccess(e){this.visible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})}},components:{TableComponent:ae,NavComponent:ne}},Ke=(s("Stt8"),Object(k.a)(Ge,Qe,[],!1,null,"0830c04e",null));Ke.options.__file="app/components/info/Lab.vue";var Ye=Ke.exports,We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-content"},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),s("table-component",{attrs:{tableConfig:e.tableConfig}})],1),e._v(" "),s("el-dialog",{attrs:{title:"值班教师信息",visible:e.userInfoDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.userInfoDialogVisible=t}}},[[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"状态",prop:"state"}},[s("el-radio-group",{model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[s("el-radio-button",{attrs:{label:"NORMAL"}},[e._v("正常")]),e._v(" "),s("el-radio-button",{attrs:{label:"DISABLE"}},[e._v("禁用")]),e._v(" "),s("el-radio-button",{attrs:{label:"DELETE"}},[e._v("删除")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"性别",prop:"sex"}},[s("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[s("el-radio-button",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),s("el-radio-button",{attrs:{label:"女"}},[e._v("女")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"联系方式",prop:"telphone"}},[s("el-input",{model:{value:e.form.telphone,callback:function(t){e.$set(e.form,"telphone",t)},expression:"form.telphone"}})],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.userInfoDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commit()}}},[e._v("确 定")])],1)],2)],1)};We._withStripped=!0;var Xe={name:"SysUser",props:["type"],data:function(){return{query:{userName:""},addUser:!0,form:{id:"",name:"",sex:"",state:"NORMAL",email:"",telphone:"",type:"TEACHER",login:!1},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"name",label:"姓名"},{prop:"telphone",label:"联系方式"}],oper:[{class:"fa fa-pencil-square-o fa-lg click-fa warning-fa",tip:{content:"编辑",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"right"},event:this.delete,check:!0}]},userInfoDialogVisible:!1}},mounted:function(){this.list()},methods:{commit:function(){this.$refs.form.validate(e=>{e&&(this.addUser?ce.saveUser(this.form).then(()=>{this.operSuccess(this),this.userInfoDialogVisible=!1}):ce.updateUser(this.form).then(()=>{this.operSuccess(this),this.userInfoDialogVisible=!1}))})},toPage:function(e){this.list({page:e})},add:function(){this.userInfoDialogVisible=!0,this.addUser=!0,this.$nextTick(()=>{this.$refs.form.resetFields(),this.form.id=""})},edit:function(e){ce.getUser({id:e.id}).then(e=>{this.userInfoDialogVisible=!0,this.form=e.user,this.addUser=!1})},delete:function(e){ce.deleteUser({id:e.id}).then(()=>{this.operSuccess(this)})},operSuccess(e){e.dialogVisible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,t.type="TEACHER",t.login=!1,ce.getUsers(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})}},components:{TableComponent:ae}},Je=Object(k.a)(Xe,We,[],!1,null,"38ff44a4",null);Je.options.__file="app/components/info/Teacher.vue";var et=Je.exports,tt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-content"},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),s("table-component",{attrs:{tableConfig:e.tableConfig}})],1),e._v(" "),s("el-dialog",{attrs:{title:"学生信息",visible:e.userInfoDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.userInfoDialogVisible=t}}},[[s("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"学号",prop:"username"}},[s("el-input",{attrs:{placeholder:"学号"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"状态",prop:"state"}},[s("el-radio-group",{model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[s("el-radio-button",{attrs:{label:"NORMAL"}},[e._v("正常")]),e._v(" "),s("el-radio-button",{attrs:{label:"DISABLE"}},[e._v("禁用")]),e._v(" "),s("el-radio-button",{attrs:{label:"DELETE"}},[e._v("删除")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{attrs:{placeholder:"姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别",prop:"sex"}},[s("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[s("el-radio-button",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),s("el-radio-button",{attrs:{label:"女"}},[e._v("女")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"学年",prop:"overTerm.year"}},[s("el-date-picker",{attrs:{type:"year",format:"yyyy","value-format":"yyyy",placeholder:"选择学年"},model:{value:e.form.overTerm.year,callback:function(t){e.$set(e.form.overTerm,"year",t)},expression:"form.overTerm.year"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"学期",prop:"overTerm.num"}},[s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.overTerm.num,callback:function(t){e.$set(e.form.overTerm,"num",t)},expression:"form.overTerm.num"}},e._l(e.nums,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.userInfoDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commit()}}},[e._v("确 定")])],1)],2)],1)};tt._withStripped=!0;var st={name:"Student",data:function(){return{query:{username:""},addUser:!0,form:{id:"",username:"",password:"",state:"NORMAL",name:"",sex:"",overTerm:{year:"",num:""},type:"STUDENT",login:!0},rules:{username:[{required:!0,message:"请输入学号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}],"overTerm.year":[{required:!0,message:"请选择学年",trigger:"change"}],"overTerm.num":[{required:!0,message:"请选择学期",trigger:"change"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"name",label:"姓名"},{prop:"state",label:"状态",width:"70",formatter:this.stateFormatter,tag:!0,tagType:this.stateTagFormatter,tagSize:"small"},{prop:"term.year",label:"学期",formatter:this.termFormatter,formatterType:"raw"}],oper:[{class:"fa fa-pencil-square-o fa-lg click-fa warning-fa",tip:{content:"编辑",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"right"},event:this.delete,check:!0}]},userInfoDialogVisible:!1,nums:[{value:1,label:"第一学期"},{value:2,label:"第二学期"}],passwordTemp:""}},mounted:function(){this.list()},methods:{commit:function(){this.$refs.form.validate(e=>{e&&(this.form.password===this.passwordTemp&&(this.form.password=""),this.addUser?ce.saveUser(this.form).then(()=>{this.operSuccess(this),this.userInfoDialogVisible=!1}):ce.updateUser(this.form).then(()=>{this.operSuccess(this),this.userInfoDialogVisible=!1}))})},toPage:function(e){this.list({page:e})},add:function(){this.userInfoDialogVisible=!0,this.addUser=!0,this.$nextTick(()=>{this.$refs.form.resetFields(),this.form.id=""})},edit:function(e){ce.getUser({id:e.id}).then(e=>{this.userInfoDialogVisible=!0,this.$nextTick(()=>{e.user.overTerm.year=e.user.overTerm.year+"",this.form=e.user,this.addUser=!1,this.passwordTemp=e.user.password})})},delete:function(e){ce.deleteUser({id:e.id}).then(()=>{this.operSuccess(this)})},operSuccess(e){e.dialogVisible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,t.type="STUDENT",ce.getUsers(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})},termFormatter:e=>e.overTerm.year+"年第"+e.overTerm.num+"学期",stateTagFormatter(e){switch(e){case"NORMAL":return"success";case"DISABLE":return"warning";case"DELETE":return"danger";default:return""}},stateFormatter(e){switch(e){case"NORMAL":return"正常";case"DISABLE":return"禁用";case"DELETE":return"删除";default:return""}}},components:{TableComponent:ae}},at=Object(k.a)(st,tt,[],!1,null,"0ce83f87",null);at.options.__file="app/components/info/Student.vue";var ot=at.exports,it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-content"},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),s("table-component",{attrs:{tableConfig:e.tableConfig}})],1),e._v(" "),s("el-dialog",{attrs:{title:"访客信息",visible:e.userInfoDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.userInfoDialogVisible=t}}},[[s("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名",prop:"password"}},[s("el-input",{attrs:{placeholder:"姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别",prop:"sex"}},[s("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[s("el-radio-button",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),s("el-radio-button",{attrs:{label:"女"}},[e._v("女")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"状态",prop:"state"}},[s("el-radio-group",{model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[s("el-radio-button",{attrs:{label:"NORMAL"}},[e._v("正常")]),e._v(" "),s("el-radio-button",{attrs:{label:"DISABLE"}},[e._v("禁用")]),e._v(" "),s("el-radio-button",{attrs:{label:"DELETE"}},[e._v("删除")])],1)],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.userInfoDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commit()}}},[e._v("确 定")])],1)],2)],1)};it._withStripped=!0;var rt={name:"Student",data:function(){return{query:{username:""},addUser:!0,form:{id:"",username:"",name:"访客",sex:"",password:"",state:"NORMAL",type:"GUEST",login:!0},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"blur"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"name",label:"姓名"},{prop:"state",label:"状态",width:"70",formatter:this.stateFormatter,tag:!0,tagType:this.stateTagFormatter,tagSize:"small"}],oper:[{class:"fa fa-pencil-square-o fa-lg click-fa warning-fa",tip:{content:"编辑",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"right"},event:this.delete,check:!0}]},userInfoDialogVisible:!1,passwordTemp:""}},mounted:function(){this.list()},methods:{commit:function(){this.$refs.form.validate(e=>{e&&(this.form.password===this.passwordTemp&&(this.form.password=""),this.addUser?ce.saveUser(this.form).then(()=>{this.operSuccess(this),this.userInfoDialogVisible=!1}):ce.updateUser(this.form).then(()=>{this.operSuccess(this),this.userInfoDialogVisible=!1}))})},toPage:function(e){this.list({page:e})},add:function(){this.userInfoDialogVisible=!0,this.addUser=!0,this.$nextTick(()=>{this.$refs.form.resetFields(),this.form.id=""})},edit:function(e){ce.getUser({id:e.id}).then(e=>{this.userInfoDialogVisible=!0,this.$nextTick(()=>{this.form=e.user,this.addUser=!1,this.passwordTemp=e.user.password})})},delete:function(e){ce.deleteUser({id:e.id}).then(()=>{this.operSuccess(this)})},operSuccess(e){e.dialogVisible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,t.type="GUEST",ce.getUsers(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})},stateTagFormatter(e){switch(e){case"NORMAL":return"success";case"DISABLE":return"warning";case"DELETE":return"danger";default:return""}},stateFormatter(e){switch(e){case"NORMAL":return"正常";case"DISABLE":return"禁用";case"DELETE":return"删除";default:return""}}},components:{TableComponent:ae}},nt=Object(k.a)(rt,it,[],!1,null,"26155cb8",null);nt.options.__file="app/components/info/Guest.vue";var lt=nt.exports,ct=function(){var e=this.$createElement;return(this._self._c||e)("left-menu-frame",{staticClass:"tab",attrs:{menus:this.leftMenus}})};ct._withStripped=!0;var mt={name:"SysComponent",mounted:function(){this.$root.loginUser.menus?this.setMenu():this.$root.$on("menuInfo",()=>{this.setMenu()})},watch:{},data:function(){return{leftMenus:[]}},methods:{setMenu(){let e=this.$root.loginUser.menus.filter(e=>"/index/sys"===e.url)[0];e&&(this.leftMenus=e.childrens)}},components:{LeftMenuFrame:R}},ut=Object(k.a)(mt,ct,[],!1,null,"6be4c348",null);ut.options.__file="app/components/SysCompnent.vue";var pt=ut.exports,dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-content"},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"角色名"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.queryList}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),s("table-component",{attrs:{tableConfig:e.tableConfig}})],1),e._v(" "),s("el-dialog",{staticClass:"role-user",attrs:{title:e.currentRow.name+"用户分配",visible:e.roleUsersDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.roleUsersDialogVisible=t}}},[[s("el-transfer",{attrs:{filterable:"","filter-method":e.filterMethod,titles:["待分配","已分配"],data:e.alloc},on:{change:e.handleChange},model:{value:e.alloced,callback:function(t){e.alloced=t},expression:"alloced"}})],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.roleUsersDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commitRoleUsers()}}},[e._v("确 定")])],1)],2),e._v(" "),s("el-dialog",{attrs:{title:"角色信息",visible:e.roleInfoDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.roleInfoDialogVisible=t}}},[[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"角色名",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"标识",prop:"sign"}},[s("el-input",{model:{value:e.form.sign,callback:function(t){e.$set(e.form,"sign",t)},expression:"form.sign"}})],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.roleInfoDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commit()}}},[e._v("确 定")])],1)],2),e._v(" "),s("el-dialog",{attrs:{title:"菜单权限",visible:e.roleMenusVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.roleMenusVisible=t}}},[[s("el-tree",{ref:"tree",attrs:{data:e.menus,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps}})],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.roleMenusVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commitRoleMenus()}}},[e._v("确 定")])],1)],2)],1)};dt._withStripped=!0;var ft={saveRole:e=>b.a.jsonPost("/role/",e),updateRole:e=>b.a.put("/role/"+e.id+"/",e),getRole:e=>b.a.get("/role/"+e.id+"/"),deleteRole:e=>b.a.delete("/role/"+e.id+"/"),getRoles:e=>b.a.get("/role/list/",e),saveRoleUsers:e=>b.a.put("/role/"+e.id+"/user/",e),getRoleUsers:e=>b.a.get("/role/"+e.id+"/user/list/",e),saveRoleMenus:e=>b.a.put("/role/"+e.id+"/menu/",e),getRoleMenus:e=>b.a.get("/role/"+e.id+"/menu/list/",e)},ht={getMenu:e=>b.a.get("/menu/list/",e)},vt={name:"SysRole",mounted:function(){this.list()},data:function(){return{query:{name:""},form:{name:"",sign:""},roleInfoDialogVisible:!1,addRole:!1,roleUsersDialogVisible:!1,roleMenusVisible:!1,currentRow:{},alloc:[],alloced:[],filterMethod:(e,t)=>t.search.indexOf(e)>-1,rules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}],sign:[{required:!0,message:"请输入标识",trigger:"blur"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"name",label:"名称",width:"580"}],oper:[{class:"fa fa-pencil-square-o fa-lg click-fa warning-fa",tip:{content:"编辑",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"top"},event:this.delete,check:!0},{class:"fa fa fa-user-o fa-lg click-fa primary-fa",tip:{content:"分配用户",placement:"top"},event:this.roleUsers},{class:"fa fa fa-bars fa-lg click-fa success-fa",tip:{content:"分配菜单",placement:"right"},event:this.roleMenus}]},menus:[]}},methods:{add:function(){this.roleInfoDialogVisible=!0,this.addRole=!0,this.$nextTick(()=>{this.$refs.form.resetFields()})},edit:function(e){this.roleInfoDialogVisible=!0,ft.getRole({id:e.id}).then(e=>{this.roleInfoDialogVisible=!0,this.form=e.role,this.addRole=!1})},delete:function(e){ft.deleteRole({id:e.id}).then(()=>{this.operSuccess(this)})},commit:function(){this.$refs.form.validate(e=>{e&&(this.addRole?ft.saveRole(this.form).then(()=>{this.operSuccess(this),this.roleInfoDialogVisible=!1}):ft.updateRole(this.form).then(()=>{this.operSuccess(this),this.roleInfoDialogVisible=!1}))})},roleUsers:function(e){this.roleUsersDialogVisible=!0,this.currentRow=e;let t=this;t.alloc=[],t.alloced=[];ce.getUsers({page:1,pageSize:99999999}).then(e=>{let s=e.list.map(e=>e.name);e.list.forEach((e,a)=>{t.alloc.push({label:e.name,key:e.id,search:s[a]})})}),ft.getRoleUsers({id:e.id,page:1,pageSize:9999999}).then(e=>{e.list.forEach(e=>{this.alloced.push(e.userId)})})},roleMenus(e){this.roleMenusVisible=!0,this.currentRow=e,ht.getMenu({page:1,pageSize:9999999}).then(t=>{const s=t.list.reduce((e,t,s)=>(e[t.id]=s,e),{});let a={id:0};t.list.forEach(e=>{let o=0===e.pid?a:t.list[s[e.pid]];e.label=e.name,o.children=[...o.children||[],e]}),this.menus=a.children,ft.getRoleMenus({id:e.id,page:1,pageSize:9999999}).then(e=>{this.$refs.tree.setCheckedKeys(e.list.map(e=>e.menuId))})})},commitRoleMenus:function(){let e=[],t=[...this.menus];for(;t.length>0;){let s=t.pop();this.$refs.tree.getCheckedKeys().includes(s.id)?e.push(s):s.children&&(t=[...t,...s.children])}ft.saveRoleMenus({id:this.currentRow.id,menus:e.map(e=>Object({menuId:e.id}))}).then(()=>{this.roleMenusVisible=!1,this.$message({message:"分配成功",type:"success"})})},commitRoleUsers:function(){let e=[];this.alloced.forEach(t=>{e.push({userId:t})}),ft.saveRoleUsers({id:this.currentRow.id,users:e}).then(()=>{this.roleUsersDialogVisible=!1,comp.$message({message:"分配成功",type:"success"})})},handleChange(e,t,s){},queryList:function(){this.list(this.query)},toPage:function(e){this.list({page:e})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,ft.getRoles(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})},operSuccess(e){this.roleInfoDialogVisible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})}},components:{TableComponent:ae}},gt=Object(k.a)(vt,dt,[],!1,null,"02f55ec4",null);gt.options.__file="app/components/sys/SysRole.vue";var bt=gt.exports,_t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-content"},[s("el-card",{staticClass:"box-card"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"用户名"},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{type:"success"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),s("table-component",{attrs:{tableConfig:e.tableConfig}})],1),e._v(" "),s("el-dialog",{attrs:{title:"用户信息",visible:e.userInfoDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.userInfoDialogVisible=t}}},[[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"联系方式",prop:"telphone"}},[s("el-input",{model:{value:e.form.telphone,callback:function(t){e.$set(e.form,"telphone",t)},expression:"form.telphone"}})],1)],1)],e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.userInfoDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.commit()}}},[e._v("确 定")])],1)],2)],1)};_t._withStripped=!0;var yt={name:"SysUser",data:function(){return{query:{userName:""},addUser:!0,form:{username:"",password:"",name:"",email:"",telphone:"",login:!0,type:"TEACHER"},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},tableConfig:{data:[],page:!0,pageMethod:this.toPage,cols:[{prop:"username",label:"用户名",width:"180"},{prop:"name",label:"姓名",width:"180"},{prop:"telphone",label:"联系方式",width:"180"}],oper:[{class:"fa fa-pencil-square-o fa-lg click-fa warning-fa",tip:{content:"编辑",placement:"top"},event:this.edit},{class:"fa fa-trash-o fa-lg click-fa danger-fa",tip:{content:"删除",placement:"right"},event:this.delete,check:!0}]},userInfoDialogVisible:!1}},mounted:function(){this.list()},methods:{commit:function(){this.$refs.form.validate(e=>{e&&(this.addUser?ce.saveUser(this.form).then(()=>{this.operSuccess(this),this.userInfoDialogVisible=!1}):ce.updateUser(this.form).then(()=>{this.operSuccess(this),this.userInfoDialogVisible=!1}))})},toPage:function(e){this.list({page:e})},add:function(){this.userInfoDialogVisible=!0,this.addUser=!0,this.$nextTick(()=>{this.$refs.form.resetFields()})},edit:function(e){ce.getUser({id:e.id}).then(e=>{this.userInfoDialogVisible=!0,this.form=e.user,this.addUser=!1})},delete:function(e){ce.deleteUser({id:e.id}).then(()=>{this.operSuccess(this)})},operSuccess(e){e.dialogVisible=!1,e.$message({message:"操作成功",type:"success"}),e.list({page:1})},list(e){let t=B.copyObject(j.page);for(let s in e)t[s]=e[s];this.tableConfig.currentPage=t.page,t.type="TEACHER",t.login=!0,ce.getUsers(t).then(e=>{this.tableConfig.data=e.list,this.tableConfig.total=e.count})}},components:{TableComponent:ae}},kt=Object(k.a)(yt,_t,[],!1,null,"02f71799",null);kt.options.__file="app/components/sys/SysUser.vue";var wt=kt.exports,xt=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"score-table mobile-div scores"},[t("el-table",{attrs:{data:this.scores,border:"","row-class-name":this.tableRowClassName}},[t("el-table-column",{attrs:{prop:"startTime",label:"考试时间"}}),this._v(" "),t("el-table-column",{attrs:{prop:"score",label:"分数"}})],1),this._v(" "),t("el-alert",{staticClass:"final-score",attrs:{title:"您的最终考试得分为:"+this.finalScore+"分",type:"success",center:"",closable:!1}})],1)};xt._withStripped=!0;var Ct={name:"Score",data:function(){return{scores:[],finalScore:0}},mounted:function(){le.a.scores(j.allPage).then(e=>{this.scores=e.list,this.scores.length>0&&(this.finalScore=Math.max(...this.scores.map(e=>e.score)))}),document.title="成绩查询"},methods:{tableRowClassName:({row:e,rowIndex:t})=>""},components:{}},$t=(s("Ft5P"),Object(k.a)(Ct,xt,[],!1,null,"1a30ef8f",null));$t.options.__file="app/components/exam/Score.vue";var St=$t.exports,qt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-div"},[s("div",{staticClass:"full-height"},[s("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.teachers,(function(t){return s("el-collapse-item",{key:t.id,attrs:{title:t.name,name:t.id}},[s("div",{staticClass:"mobile-item-row"},[s("el-rate",{attrs:{"show-text":"",texts:e.texts},model:{value:t.rate,callback:function(s){e.$set(t,"rate",s)},expression:"teacher.rate"}})],1),e._v(" "),s("div",{staticClass:"mobile-item-row"},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写评价"},model:{value:t.comment,callback:function(s){e.$set(t,"comment",s)},expression:"teacher.comment"}})],1),e._v(" "),s("div",[s("el-button",{attrs:{type:"success",plain:""},on:{click:function(s){return e.submitRate(t)}}},[e._v("提交评价")])],1)])})),1)],1)])};qt._withStripped=!0;var Tt={name:"TeacherRate",data:function(){return{teachers:[],texts:["极差","失望","一般","满意","很棒"]}},mounted:function(){ce.getUsers({page:1,pageSize:99999999,type:"TEACHER",login:!1}).then(e=>{this.teachers=e.list})},methods:{submitRate(e){console.log({id:e.id,rate:e.rate,comment:e.comment})}},components:{}},Dt=Object(k.a)(Tt,qt,[],!1,null,"3e5c80f0",null);Dt.options.__file="app/components/info/TeacherMobile.vue";var It=Dt.exports,Et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-div"},[s("el-form",{ref:"form",staticClass:"login",attrs:{model:e.form,rules:e.rules}},[e.form.guest?e._e():s("el-form-item",{staticClass:"mobile-item",attrs:{prop:"name"}},[s("el-input",{attrs:{placeholder:"姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("el-form-item",{staticClass:"mobile-item",attrs:{prop:"username",rules:{required:!0,message:"请输入"+e.usernameText,trigger:"change"}}},[s("el-input",{attrs:{placeholder:e.usernameText},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),s("el-form-item",{staticClass:"mobile-item",attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),s("el-button",{staticClass:"mobile-item",attrs:{type:"success",plain:""},on:{click:e.login}},[e._v("登陆")]),e._v(" "),s("el-link",{attrs:{type:"success"},on:{click:e.changeType}},[e._v(e._s(e.loginTypeText))])],1)],1)};Et._withStripped=!0;var Pt={created:function(){},data:function(){return{form:{username:"",password:"",name:"",guest:!1},usernameText:"学号",loginTypeText:"切换到访客登陆",rules:{name:[{required:!0,message:"请输入姓名",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]}}},mounted:function(){document.title="登录"},methods:{login(){this.$refs.form.validate(e=>{e&&_.signIn(this.form).then(e=>{localStorage.setItem("ssm_token",e.token),this.$cookie.set("ssm_token",e.token),this.$router.push(localStorage.getItem("currentPath")).catch(e=>e)})})},changeType(){this.form.guest=!this.form.guest,this.usernameText=this.form.guest?"用户名":"学号",this.loginTypeText=this.form.guest?"切换到学生登陆":"切换到访客登陆"}},components:{}},Ut=(s("wyat"),Object(k.a)(Pt,Et,[],!1,null,"8fbc07ec",null));Ut.options.__file="app/components/MobileLogin.vue";var Mt=Ut.exports,Ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-div"},[s("el-form",{ref:"form",staticClass:"full-height",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{staticClass:"mobile-item",attrs:{prop:"passwordNew"}},[s("el-input",{attrs:{type:"password",placeholder:"新密码"},model:{value:e.form.passwordNew,callback:function(t){e.$set(e.form,"passwordNew",t)},expression:"form.passwordNew"}})],1),e._v(" "),s("el-form-item",{staticClass:"mobile-item",attrs:{prop:"passwordConfirm"}},[s("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.form.passwordConfirm,callback:function(t){e.$set(e.form,"passwordConfirm",t)},expression:"form.passwordConfirm"}})],1),e._v(" "),s("el-button",{staticClass:"mobile-item",attrs:{type:"success",plain:""},on:{click:e.change}},[e._v("确定修改")]),e._v(" "),s("el-button",{staticClass:"mobile-item",attrs:{type:"warning",plain:""},on:{click:e.cancel}},[e._v("取消")])],1)],1)};Ot._withStripped=!0;var Rt={created:function(){},data:function(){return{form:{passwordNew:"",passwordConfirm:""},rules:{passwordNew:[{required:!0,message:"请输入新密码",trigger:"change"}],passwordConfirm:[{required:!0,message:"请输入确认密码",trigger:"change"}]}}},mounted:function(){document.title="修改密码"},methods:{change(){this.$refs.form.validate(e=>{e&&(this.form.passwordNew!==this.form.passwordConfirm?this.$message({message:"新密码与确认密码不一致",type:"error"}):_.updatePassword({password:this.form.passwordNew}).then(()=>{this.$message({message:"密码已修改",type:"success"}),this.$router.push("/wx/my").catch(e=>e)}))})},cancel(){this.$router.push("/wx/my").catch(e=>e)}},components:{}},Lt=Object(k.a)(Rt,Ot,[],!1,null,"508b1b1a",null);Lt.options.__file="app/components/MobileChangePassword.vue";var Ft=Lt.exports,Vt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mobile-div"},[s("div",{staticClass:"full-height"},[e.$root.loginUser.name?s("table",{staticClass:"form-table mobile-item"},[s("tr",[s("th",{staticStyle:{width:"30%"}},[e._v("姓名")]),e._v(" "),s("td",[e._v(e._s(e.$root.loginUser.name))])]),e._v(" "),s("tr",[s("th",{staticStyle:{width:"30%"}},[e._v("学号")]),e._v(" "),s("td",[e._v(e._s(e.$root.loginUser.username))])]),e._v(" "),s("tr",[s("td",{attrs:{colspan:"2"}},[s("el-button",{staticClass:"mobile-item",attrs:{type:"warning",plain:""},on:{click:e.changePassword}},[e._v("修改密码")]),e._v(" "),s("el-button",{staticClass:"mobile-item",attrs:{type:"danger",plain:""},on:{click:function(t){return e.logout()}}},[e._v("注销\n                    ")])],1)])]):s("div",{staticClass:"mobile-center-text"},[e._v("\n            您已退出登录!\n        ")])])])};Vt._withStripped=!0;var At={created:function(){},data:function(){return{}},mounted:function(){_.getLoginUser().then(e=>{this.$root.loginUser=e.user}),document.title="个人信息"},methods:{logout(){_.logOut().then(()=>{}),this.$root.loginUser={},this.$cookie.delete("ssm_token"),localStorage.removeItem("ssm_token")},changePassword(){this.$router.push("/wx/changePasswordM").catch(e=>e)}},components:{}},Nt=Object(k.a)(At,Vt,[],!1,null,"38e4885b",null);Nt.options.__file="app/components/MobileMy.vue";var jt=Nt.exports,zt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{staticClass:"box-card"},[e.codesNum?s("el-alert",{staticClass:"code-info",attrs:{title:e.codesNum,type:"success",closable:!1}}):e._e(),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.exportDisable},on:{click:function(t){return e.downloadQrs()}}},[e._v(e._s(e.exportText))]),e._v(" "),s("div",{staticClass:"multi-row"},e._l(e.codes,(function(t){return s("section",{ref:t.sectionRef,refInFor:!0,staticClass:"code-wrapper"},[s("div",{ref:t.codeRef,refInFor:!0,staticClass:"code"},[e._v(e._s(t.code))]),e._v(" "),s("vue-qr",{attrs:{correctLevel:3,autoColor:!1,colorDark:t.color,logoSrc:t.logoSrc,text:t.url,size:t.size,margin:0,logoMargin:3,callback:t.callback}})],1)})),0)],1)};zt._withStripped=!0;var Bt=s("xOOu"),Zt=s.n(Bt),Ht=s("Iab2"),Qt=s.n(Ht),Gt={name:"SampleBank",watch:{loadCount:function(e){e===this.codes.length&&(this.exportText="导出",this.exportDisable=!1,this.codesNum="共计"+this.codes.length+"个标本二维码")}},data:function(){return{codes:[],exportText:"正在加载二维码,请稍等...",exportDisable:!0,loadCount:0,codesNum:""}},mounted:function(){be.getSBs(j.allPage).then(e=>{be.getSamples(j.allPage).then(t=>{this.codes=t.list.map(t=>({sectionRef:"qrArea"+t.id,codeRef:"qrNo"+t.id,url:xe.a.baseURL.replace("api","")+"/#/wx/sample?id="+t.id,icon:"",logoSrc:"",size:400,name:t.name,code:t.code,color:e.list.filter(e=>e.id===t.bankId)[0].color,callback:()=>{this.loadCount++}})),this.$nextTick(()=>{this.codes.forEach(e=>{this.$refs[e.codeRef][0].style.top=e.size/2-43+"px",this.$refs[e.codeRef][0].style.left=e.size/2-43+"px",this.$refs[e.codeRef][0].style.border="1px solid "+e.color,this.$refs[e.codeRef][0].style.color=e.color})})})})},methods:{downloadQrs(){let e=this,t=new Zt.a,s=[];this.codes.forEach(a=>{window.pageYoffset=0,document.documentElement.scrollTop=0,document.body.scrollTop=0;let o=e.$refs[a.sectionRef][0],i=o.offsetWidth,r=o.offsetHeight;const n=Te()(o,{width:i,heigth:r,backgroundColor:"#ffffff",dpi:2*window.devicePixelRatio,scale:2,X:0,Y:0,scrollX:-3,scrollY:0,useCORS:!0,allowTaint:!0}).then(e=>{let s=e.toDataURL().split(";base64,")[1];t.file(a.code+"-"+a.name+".png",s,{base64:!0})});s.push(n)}),Promise.all(s).then(()=>{t.generateAsync({type:"blob"}).then(e=>{Qt.a.saveAs(e,"二维码")})}).catch(()=>{e.$message.error("文件压缩失败")})}},components:{VueQr:Se.a}},Kt=(s("qqE7"),Object(k.a)(Gt,zt,[],!1,null,"f88412ac",null));Kt.options.__file="app/components/sample/QrCodeExport.vue";var Yt=Kt.exports;n.a.defaults.withCredentials=!0,o.a.use(c.a,n.a),o.a.use(d.a),o.a.use(v.a),o.a.use(u.a),o.a.use(i.a);const Wt=i.a.prototype.push;i.a.prototype.push=function(e){return Wt.call(this,e).catch(e=>e)},o.a.use(f.a);var Xt=t.a={vueG:null,init(){if(!this.vueG){const e=[{path:"/",redirect:"/sign"},{path:"/sign",component:x},{path:"/index",component:q,children:[{path:"app",name:"app",component:V,children:[{path:"questionbanks",name:"questionbanks",component:pe},{path:"questionbank",name:"questionbank",component:ve},{path:"lab",name:"lab",component:Ye},{path:"teacher",name:"teacher",component:et},{path:"student",name:"student",component:ot},{path:"guest",name:"guest",component:lt},{path:"samplebanks",name:"samplebanks",component:ke},{path:"samplebank",name:"samplebank",component:Ee},{path:"sampleinfo",name:"sampleinfo",component:je},{path:"qrcodeexport",name:"qrcodeexport",component:Yt}]},{path:"sys",name:"sys",component:pt,children:[{path:"user",name:"user",component:wt},{path:"role",name:"role",component:bt}]}]},{path:"/wx/error",component:E},{path:"/wx/appointment",component:G},{path:"/wx/sample",component:Fe},{path:"/wx/exam",component:He},{path:"/wx/score",component:St},{path:"/wx/teacherRate",component:It},{path:"/wx/loginM",name:"/wx/loginM",component:Mt},{path:"/wx/changePasswordM",component:Ft},{path:"/wx/appointments",component:X},{path:"/wx/my",component:jt}],t=new i.a({routes:e});this.vueG=new o.a({router:t,data:function(){return{loginUser:{}}}})}}}}},[["xATA",1,2,3]]]);